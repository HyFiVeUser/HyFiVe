# Deck Box - Hardware

# Bill of Material

The following parts are needed to manufacture a HyFiVe deck box.

| #   | Amount | Unit | Name                                                                                                                        | GTIN                                  |
| --- | ------ | ---- | --------------------------------------------------------------------------------------------------------------------------- | ------------------------------------- |
|     |        |      | **Electronic components**                                                                                                   |                                       |
| 1   | 1      | pc   | Raspberry Pi 4 B 4GB ram , incl. Micro SD card (min 8 GB) and official case                                                 | 0765756931182  644824914923           |
| 2   | 1      | pc   | Router Teltonika RUT955 incl. supplied antennas (2 x wifi, 2 x mobile data, 1 x GPS)                                        | 4779027311302                         |
| 3   | 1      | pc   | Sim card incl. mobile data                                                                                                  |                                       |
| 4   | 1      | pc   | Network cable, short, small bending radius (e.g. 0.2 m)                                                                     | e.g. 4052792024371                    |
|     |        |      | **Internal power supply**                                                                                                   |                                       |
| 5   | 1      | pc   | Self designed PCB  for power distribution incl. fuse and diodes, see (TODO **LINK TO SCHEMATICS**)                          | self manufactured                     |
| 6   | 1      | pc   | ACDC converter, 12 or 24 V output, min 20 W, e.g. Mean Well LPV-20-12 LED Trafo                                             | 4021087006965                         |
| 7   | 1      | pc   | DCDC Converter, Input 8-58V, output: 5V, max. 15 W, e.g. K480503                                                            | 8852090466622                         |
| 8   | 1      | pc   | power plug for RUT955, either cut and reused from ACDC unit                                                                 |                                       |
| 9   | 1      | pc   | alternativly: Molex crimp socket 'Micro-Fit' 2x2-poles plus 4 x crimp contact                                               | product numbers 0039039042 430300038  |
| 10  | 1      | pc   | Wire 15 cm, 2 x ~0.5mm², red and black                                                                                      |                                       |
| 11  | 1      | pc   | TODO **update USB-Plug!**  ~~USB C plug, rectangular, e.g. cut from cable~~                                                 | e.g. 4064161155296                    |
|     |        |      | **External power supply**                                                                                                   |                                       |
| 12  | 1      | pc   | Power cable, ~15 m, 2 wires, ~1mm², suited for outdoor/deck                                                                 | 2050005621999                         |
|     |        |      | **For connection to 230  V**                                                                                                |                                       |
| 13  | 1      | pc   | Socket Weipu SP2212/P3-1N, male, 3 pins, IP68                                                                               | 2050001515001                         |
| 14  | 1      | pc   | Plug Weipu SP2110 / S 3 I, female, 3 pins, IP68                                                                             | 2050001514738                         |
| 15  | 1      | pc   | Cover Weipu SP2110-Cap                                                                                                      | 2050001515353                         |
| 16  | 1      | pc   | Cover Weipu SP2111-Cap                                                                                                      | 2050001515360                         |
| 17  | 1      | pc   | Protected contact plug (Schuko) for connection to 230 V grid                                                                | 4011160604126                         |
|     |        |      | **For connection to 12/24 V**                                                                                               |                                       |
| 18  | 1      | pc   | Socket Weipu SP2212/P2-1N, male, 2 pins, IP68                                                                               | 2050001514998                         |
| 19  | 1      | pc   | Plug Weipu SP2110 / S 2 I, female, 2 pins, IP68                                                                             | 2050001514721                         |
| 20  | 2      | pc   | Cover Weipu SP2110-Cap                                                                                                      | 2050001515353                         |
| 21  | 2      | pc   | Cover Weipu SP2111-Cap                                                                                                      | 2050001515360                         |
| 22  | 1      | pc   | Plug of your coice for connection to low voltage grid                                                                       |                                       |
|     |        |      | **Case incl. internal mountings**                                                                                           |                                       |
| 23  | 1      | pc   | FIBOX Case 180x180x150 (Product-No.: 6011323)                                                                               | 6418074052216                         |
| 25  | 1      | pc   | 3D printed mounting for electronic components TODO **Link to STEP files**                                                   | self manufactured                     |
| 26  | 1      | pc   | 3D printed mounting for antennas of RUT955, consisting of three layers<br>TODO **Link to STEP files**                       | self manufactured                     |
| 27  | 2      | pc   | Threaded inserts to melt into 3D print, M3x6x5                                                                              | e.g. ASIN B09B7F2XM3 or 4260528721160 |
| 28  | 2      | pc   | Hexagonal screws M3x16                                                                                                      |                                       |
| 29  | 2      | pc   | Cable ties small                                                                                                            |                                       |
| 30  | 4      | pc   | Tapping screw (Belchschraube) M2,2x9,5                                                                                      | 4043377162205                         |
| 31  | ~25    | pc   | Tapping screw (Belchschraube) M2,9x9,5                                                                                      | 4043952537589                         |
| 32  | 2      | pc   | Tapping screw (Belchschraube) M3,9x9,5                                                                                      | 4043377159625                         |
| 33  | 1      | pc   | Sealing tape for water tightness                                                                                            |                                       |
|     |        |      | **Mounting for box on reeling**                                                                                             |                                       |
| 34  | 1      | pc   | Mounting plate, watercutted, stainless steel V4A<br>TODO **Link to STEP files**                                             | self manufactured                     |
| 35  | 4      | pc   | Hexagonal screw, M4x16, incl. washer and self-securing nut, stainless steel V4A                                             |                                       |
| 36  | 2      | pc   | Steel strap for tubes, DIN 3570, nominal width 46 mm, incl. 2 M10 self-securing nuts and 2 M10 washers, stainless steel V4A | 4043952396568                         |
| 37  | 2      | pc   | Steel strap for tubes, DIN 3570, nominal width 82 mm, incl. 2 M12 self-securing nuts and 2 M12 washers, stainless steel V4A | 4043377302007                         |

# Needed tools

- Drilling machines for 2 and 22 mm holes (e.g. Step Drill)
- Soldering station, including equipment e.g. shrinking tubes
	- adapter tip for melting in press nuts
- 2x wrench 27 mm 
- Reader for micro SD
- Screwdriver PH1 + PH2
- Screwdriver flathead (2,5)
- caliper
- Sikaflex (e.g. 291i  or some other marine certified adhesive sealant)


# Self-Manufactured Components

## self manufactured 

The following components need to be manufactured according to design files provided in this Github repository:
- PCB for power distribution: 
   - Both power inputs of the deck box (DC and AC) are fed into this PCB (AC after converting to DC). The PCB holds a fuse and two diodes for backflow protection. So both power inputs can be connected at the same time without damage, and also both inputs are fed through the fuse. 
   - The function of the PCB is also depicted in the [flow diagram below](#connect-components)
   - To reproduce the PCB, you find all necessary infos in the subfolder [./02_electronic/PCB_DC_PowerDistrubution/](./02_electronic/PCB_DC_PowerDistrubution/). Order the PCB at a manufacturer of your choice and fit the parts included in the Bill of Material.
     TODO **Update PCB Schematics with bigger clams for Cables with "Aderendhülsen"**
- 3D printed mountings: Use a 3D printer to manufacture 1 x mounting for antennas (consisting of 3 subcomponents called levels) and 1 x mounting for electronic parts (consisting of 3 subcomponents). Use the stl files provided in [./01_mechanic/01_internal_mounting/](./01_mechanic/01_internal_mounting/). Printer settings can be chosen as you like (we used ABS, 20% infill, fast mode on an Ultimaker S5). TODO **Check Subcomponents! Are Settings still up to date?** 
- Water-cut mounting: If you want to mount the deck box on a reeling, you can use a water-cut mounting plate as shown in the picture below. You can use the step file provided in [./01_mechanic/02_external_mounting/](./01_mechanic/02_external_mounting/) and order at a manufacturer of your choice (price approx. 60 €). 

<figure> 
   <img src="media/deckbox_on_deck2.jpg"  width="900" title="deckbox_on_deck">

   <figurecaption><a name="figure1">*Figure 1:*</a> *Deck box mounted on deck with water-cut mounting plate and steel straps*</figurecaption>
</figure>

# Assembly
## Deck Box Top
### Antenna Mount (Top level)
- Insert Wi-Fi and mobile antennas into the holder. The same antennas should be orthogonal to each other.
- The antenna should click when it is locked into the bracket.
- Guide the cables through the corresponding slots

<table>
  <caption>Table 1: Mounting antennas
  <tr>
    <td><img src="media/mounting_antennas_01.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/mounting_antennas_01.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/mounting_antennas_01.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>

![[IMG_0079.heic]]
![[IMG_0080.heic]]

Guide the GPS antenna cable and click the antenna into place.

![[IMG_0084.heic]]
### Middle level
Insert the middle level of the antenna mount and guide all 5 cables through.

![[IMG_0085.heic]]
![[IMG_0086.heic]]

Screw the top and middle levels together using 10 metal screws (2.9 x 9.5) starting from the center and then the corners.

![[IMG_0088.heic]]
![[IMG_0089.heic]]

Bundle the cables with cable ties (2.5mm) and attach them to the middle level

![[IMG_0090.heic]]

Wind the cables together at the middle level, leaving 30 cm of each cable loose, and guide them back through the second opening (Note: Wi-Fi cables are shorter than the others!). It is recommended to keep the winding flat so that the cables can be easily guided back.

![[IMG_0092.heic]]
![[IMG_0094.heic]]

Bundle the cables again and secure them with cable ties

![[IMG_0096.heic]]


#### Bottom level
Using a soldering iron and an M3 adapter tip at approximately 180°C, melt the press nuts into the corners of the top level. Place the press nuts on the soldering iron with tweezers (!Warning! Hot!). If necessary, first free the hole by screwing in an M3 cylinder head screw.

![[IMG_0101.heic]]
![[IMG_0103.heic]]
![[IMG_0105.heic]]
![[IMG_0104.heic]]
![[IMG_0106.heic]]
![[IMG_0107.heic]]
![[IMG_0108.heic]]
![[IMG_0110.heic]]

For later attachment to the deck box lid, screw 4 cylinder head screws from the inside into the threads.

![[IMG_0112.heic]]
![[IMG_0111.heic]]

Guide the cables through the middle opening of the bottom level and place them on the middle level.

![[IMG_0113.heic]]

Screw the bottom level into place using 10 metal screws, similar to the top level

![[IMG_0117.heic]]

Place the entire mount in the deck box lid and secure it with screws in the corners.

---

## Deck Box Bottom
Using a step drill, create a 22 mm hole on two opposing sides (centered, 26 mm from the top edge).

!!! DRAWING !!!
weipu_drill_holes.jpg

### Installing the Bottom Plate
Insert the bottom plate into the deck box, paying attention to the recess for the Weipu connectors.

![[IMG_0131 1.heic]]

Secure the plate with 4 plastic washers and 4 metal screws (3.8 x 9).

![[IMG_0136.heic]]

### AC/DC Converter
Press the AC/DC converter into the housing and secure the housing to the bottom plate with 2 metal screws (2.9 x 9.5mm).

![[IMG_0137.heic]]

Cable sides see photo

![[IMG_0138.heic]]


### PCB on AC/DC Housing
Screw the PCB onto the AC/DC housing with 2 metal screws (2.2 x 6.5 mm).

![[IMG_0141.heic]]


### Connecting Weipu Connectors
### AC Connector (3-Pole)
Unscrew the nut and thread it onto the blue and brown cables of the AC/DC converter. Guide the cables outward through the hole.

![[IMG_0153.heic]]

Shorten the AC cable to 10 cm from the deck box and strip the insulation.
Solder the Weipu connector (3-pole) to the cable. Blue to pole 1, brown to pole 2 of the connector (it also works the other way around). Pole 3 (Ground) is not connected.

![[IMG_0162.heic]]


#### Glueing / Sealing with Sikaflex instead of a gasket, as the deck box wall is too thick.
Required:
- Sikaflex
- Cleaning alcohol
- Cleaning wipes
- Spatula

Procedure
- Clean the surfaces of the deck box and Weipu connector in the contact area with alcohol.
- Apply Sikaflex (291i) to the flange of the Weipu connector with a spatula (as sparingly as possible, but there should be a continuous film on the connector).
- Insert the connector (white dot pointing up) and screw it into place (27 mm wrench)
- Scrape off excess sealant

![[IMG_0168.heic]]

![[IMG_0163.heic]]

### DC Connector (2-Pole)
#### Required:
- Weipu connector 2-pole
- Cable (2 conductors, diameter 2mm, length at least 25cm)
- Heat shrink tube
- 2x wire end sleeves
- Soldering iron
- Solder
- Vice
- Wire stripping pliers
- Crimping pliers

####

Unscrew the nut and thread it onto the black and red cables. Guide the cables outward through the hole.

![[IMG_0157.heic]]

Solder the Weipu connector to the cable. Black (Ground) at the top (white dot) and red (Lead) at the bottom of the connector. The other end of the cable is screwed into the PCB input

![[IMG_0158.heic]]


#### Glueing / Sealing with Sikaflex instead of a gasket, as the deck box wall is too thick.
Required:
- Sikaflex
- Cleaning alcohol
- Cleaning wipes
- Spatula

- Clean the surfaces of the deck box and Weipu connector in the contact area with alcohol.
- Apply Sikaflex (2911) to the flange of the Weipu connector with a spatula (as sparingly as possible, but there should be a continuous film on the connector).
- Insert the connector (white dot pointing up) and screw it into place (27 mm wrench)
- Scrape off excess sealant


![[IMG_0168.heic]]

![[IMG_0163.heic]]


### Mounting the Raspberry Pi
Cut the foam tape into 3 pieces (2x approximately 0.5 cm length for the sides of the recess in the bottom plate, 1x approximately 3 cm length for the clamp) and glue them into place.

![[IMG_0142.heic]]
![[IMG_0143.heic]]
![[IMG_0144.heic]]

Insert the Raspberry Pi, secure the clamp, and screw it into place with a metal screw (2.9 x 9.5 mm).

![[IMG_0145.heic]]
![[IMG_0146 1.heic]]

----

### Connecting AC/DC Converter
- Shorten the DC cable from the AC/DC converter to 20 cm and strip the insulation
- Screw the cable into place on the input side of the PCB

![[IMG_0159.heic]]

### Installing the DC/DC Converter
- Install the DC/DC converter with the holder and screw it into place

![[IMG_0167.heic]]

![[IMG_0155.heic]]

- Solder the USB-C connector to the output (black and yellow cable) at a 90° angle
- Use heat shrink tubing
- @SEBASTIAN: PLEASE ADD HERE
- Screw the input into the PCB
- Insert the USB-C connector into the Raspberry Pi

### Connecting the Router Antennas

- Screw the antennas onto the router


![[IMG_0170.heic]]
![[IMG_0172.heic]]
![[IMG_0171.heic]]

- Screw the router onto the bottom plate (2.3 x 9.5)

![[IMG_0173.heic]]
![[IMG_0174.heic]]
![[IMG_0175.heic]]

- Insert the Ethernet and power (12V) cables

![[IMG_0176.heic]]

- Power cable 270mm

![[IMG_0177.heic]]

- Twisted pair (2x0.5^2)
- 1. End 2x wire and sleeves
- 2. End crimp 2824-20

### Assembling the Deck Box

![[IMG_0179.heic]]

requires:
- 4x nuts M4
- 4x washers M4
- 4x flat head screws M4x16
- Stainless steel cage

- Screw the stainless steel cage onto the deck box bottom (M4)
- Clean the seal of the deck box
- Place the lid on top and screw it into place
- Attach the connector caps
- Apply stickers

![[IMG_0180.heic]]

![[IMG_0182.heic]]

![[IMG_0183.heic]]

![[IMG_0184.heic]]

![[IMG_0185.heic]]

## Manufacture Power Cable for 230 V
Depending on the power source available on the chosen vessel, you can manufacture the corresponding power cable. 

Safety caution: When dealing with 230 V make sure that you do not endanger yourself and that your product is safe for usage by other people. Make sure that you have the necessary training and follow the local laws.

24. Cut 15 m cable (or length suitable for your application)
26. Attach Schuko plug including cap on one side
27. Attach Weipu 3 pin plug on the other side (use pin 1 and 2)

## Manufacure Power Cable for 9-30 V
28. Cut 15 m cable (or length suitable for your application)
29. Use brown wire as plus. Use blue wire as minus
30. Attach Weipu 2 pin plug including cap to one side. Use pin 1 as minus, pin 2 as plus
31. Attach plug of your choice to second end of cable
