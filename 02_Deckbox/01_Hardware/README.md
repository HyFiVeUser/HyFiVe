# Bill of material

The following parts are needed to manufacture a HyFiVe deckbox.

| #   | Amount | Unit | Name                                                                                                                        | GTIN                                  |
| --- | ------ | ---- | --------------------------------------------------------------------------------------------------------------------------- | ------------------------------------- |
|     |        |      | **Electronic components**                                                                                                   |                                       |
| 1   | 1      | pc   | Raspberry Pi 4 B 4GB ram , incl. Micro SD card (min 8 GB) and official case                                                 | 0765756931182  644824914923           |
| 2   | 1      | pc   | Router Teltonika RUT955 incl. supplied antennas (2 x wifi, 2 x mobile data, 1 x GPS)                                        | 4779027311302                         |
| 3   | 1      | pc   | Sim card incl. mobile data                                                                                                  |                                       |
| 4   | 1      | pc   | Network cable, short, small bending radius (e.g. 0.2 m)                                                                     | e.g. 4052792024371                    |
|     |        |      | **Internal power supply**                                                                                                   |                                       |
| 5   | 1      | pc   | Self designed PCB  for power distribution incl. fuse and diodes, see (TODO **LINK TO SCHEMATICS**)                          | self manufactured                     |
| 6   | 1      | pc   | ACDC converter, 12 or 24 V output, min 20 W, e.g. Mean Well LPV-20-12 LED Trafo                                             | 4021087006965                         |
| 7   | 1      | pc   | DCDC Converter, Input 8-58V, output: 5V, max. 15 W, e.g. K480503                                                            | 8852090466622                         |
| 8   | 1      | pc   | power plug for RUT955, either cut and reused from ACDC unit                                                                 |                                       |
| 9   | 1      | pc   | alternativly: Molex crimp socket 'Micro-Fit' 2x2-poles plus 4 x crimp contact  2824-20                                      | product numbers 0039039042 430300038  |
| 10  | 2      | pc   | 2-core wire ~25 cm, 2 x ~0.5mm², red and black                                                                              |                                       |
| 11  | 6      | pc   | electric wire ferrule 0.5mm² 												    |					    |
| 12  | 4      | pc   | Heat shrink tubing 20mm x 3mm 												    |					    |
| 13  | 1      | pc   | USB-C Plug, e.g. recable USB C to C plug 5 strands set (consits of 3 parts: plug, housing and heat shrink tubing)           |		  	                    |
|     |        |      | **External power supply**                                                                                                   |                                       |
| 14  | 1      | pc   | Power cable, ~15 m, 2 wires, ~1mm², suited for outdoor/deck                                                                 | 2050005621999                         |
|     |        |      | **For connection to 230  V**                                                                                                |                                       |
| 15  | 1      | pc   | Socket Weipu SP2212/P3-1N, male, 3 pins, IP68                                                                               | 2050001515001                         |
| 16  | 1      | pc   | Plug Weipu SP2110 / S 3 I, female, 3 pins, IP68                                                                             | 2050001514738                         |
| 17  | 1      | pc   | Cover Weipu SP2110-Cap                                                                                                      | 2050001515353                         |
| 18  | 1      | pc   | Cover Weipu SP2111-Cap                                                                                                      | 2050001515360                         |
| 19  | 1      | pc   | Protected contact plug (Schuko) for connection to 230 V grid                                                                | 4011160604126                         |
|     |        |      | **For connection to 12/24 V**                                                                                               |                                       |
| 20  | 1      | pc   | Socket Weipu SP2212/P2-1N, male, 2 pins, IP68                                                                               | 2050001514998                         |
| 21  | 1      | pc   | Plug Weipu SP2110 / S 2 I, female, 2 pins, IP68                                                                             | 2050001514721                         |
| 22  | 1      | pc   | Cover Weipu SP2110-Cap                                                                                                      | 2050001515353                         |
| 23  | 1      | pc   | Cover Weipu SP2111-Cap                                                                                                      | 2050001515360                         |
| 24  | 1      | pc   | Plug of your coice for connection to low voltage grid                                                                       |                                       |
|     |        |      | **Case incl. internal mountings**                                                                                           |                                       |
| 25  | 1      | pc   | FIBOX Case 180x180x150 (Product-No.: 6011323)                                                                               | 6418074052216                         |
| 26  | 1      | pc   | 3D printed mounting for electronic components, consisting of four parts TODO **Link to STEP files**                         | self manufactured                     |
| 27  | 1      | pc   | 3D printed mounting for antennas of RUT955, consisting of three layers<br>TODO **Link to STEP files**                       | self manufactured                     |
| 28  | 4      | pc   | Threaded inserts to melt into 3D print, M3x5x4                                                                              | e.g. ASIN B09B7F2XM3 or 4260528721160 |
| 29  | 4      | pc   | Allen screws M3x16                                                                                                          |                                       |
| 30  | 2      | pc   | Cable ties small                                                                                                            |                                       |
| 31  | 2      | pc   | Tapping screw 2.2 x 6.5                                                                                                     | 4043952720745                         |
| 32  | 28     | pc   | Tapping screw 2.9 x 9.5                                                                                                     | 4043952537589                         |
| 33  | 4      | pc   | Tapping screw 3.9 x 9.5                                                                                                     | 4043377159625                         |
| 34  | 4      | pc   | (plastic) washers for 3.9 mm with large outer diameter                                                                      |                                       |
| 35  | 1      | pc   | ~5 cm foam tape (2 cm width)                                                                                                |                                       |
|     |        |      | **Mounting for box on reeling**                                                                                             |                                       |
| 36  | 1      | pc   | Mounting plate, watercutted, stainless steel V4A<br>TODO **Link to STEP files**                                             | self manufactured                     |
| 37  | 4      | pc   | Allen screw, M4x16, incl. washer and self-securing nut, stainless steel V4A                                                 |                                       |
| 38  | 2      | pc   | Steel strap for tubes, DIN 3570, nominal width 46 mm, incl. 2 M10 self-securing nuts and 2 M10 washers, stainless steel V4A | 4043952396568                         |
| 39  | 2      | pc   | Steel strap for tubes, DIN 3570, nominal width 82 mm, incl. 2 M12 self-securing nuts and 2 M12 washers, stainless steel V4A | 4043377302007                         |

# Needed tools

- Drilling machines 22 mm holes
- Soldering station, including equipment
- Adapter tip for melting in press nuts
- Tweezers
- Diagonal pliers
- wire stripper
- Heat gun
- Wrench 27 mm
- Allen wrench 2.5 and 3 mm
- Screwdriver PH1 + PH2
- Screwdriver flathead (2.5)
- Caliper
- Sikaflex (e.g. 291i  or some other marine certified adhesive sealant)
- Spatula
- Crimp-Tools for 2824-20 and for electric wire ferrules
- Cleaning equipment: ethanol, q-tips, lint-free wipes


# Self manufactured components

The following components need to be manufactured according to design files provided in this Github repository:
- PCB for power distribution: 
   - Both power inputs of the deckbox (DC and AC) are fed into this PCB (AC after converting to DC). The PCB holds a fuse and two diodes for backflow protection. So both power inputs can be connected at the same time without damage, and also both inputs are fed through the fuse. 
   - The function of the PCB is also depicted in the [flow diagram below](#connect-components)
   - To reproduce the PCB, you find all necessary infos in the subfolder [./02_electronic/PCB_DC_PowerDistrubution/](./02_electronic/PCB_DC_PowerDistrubution/). Order the PCB at a manufacturer of your choice and fit the parts included in the Bill of Material.
     TODO **Update PCB Schematics with bigger clams for Cables with "Aderendhülsen"**
- 3D printed mountings: Use a 3D printer to manufacture 1 x mounting for antennas (consisting of 3 subcomponents called levels) and 1 x mounting for electronic parts (consisting of 3 subcomponents). Use the stl files provided in [./01_mechanic/01_internal_mounting/](./01_mechanic/01_internal_mounting/). Printer settings can be chosen as you like (we used ABS, 20% infill, fast mode on an Ultimaker S5). TODO **Check Subcomponents! Are Settings still up to date?** 
- Water-cut mounting: If you want to mount the deckbox on a reeling, you can use a water-cut mounting plate as shown in the picture below. You can use the step file provided in [./01_mechanic/02_external_mounting/](./01_mechanic/02_external_mounting/) and order at a manufacturer of your choice (price approx. 60 €). 

<figure> 
   <img src="media/deckbox_on_deck2.jpg"  width="900" title="deckbox_on_deck">
</figure>

# Assembly
## Deckbox top
### Antenna mount (top level)
- Insert Wi-Fi and mobile antennas into the holder. The same antennas should be orthogonal to each other.
- The antenna should click when it is locked into the bracket.
- Guide the cables through the corresponding slots

<table>
  <tr>
    <td><img src="media/mounting_antennas_01.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/mounting_antennas_01a.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/mounting_antennas_03.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>

- Guide the GPS antenna cable and click the antenna into place.
<figure> 
   <img src="media/Mounting_antennas_GPS.jpg"  width="500" title="GPS Antenna">
</figure>


### Antenna mount (middle level)
- Insert the middle level of the antenna mount and guide all 5 cables through.

<figure> 
   <img src="media/middle_level_01.jpg"  width="500" title="middle level">
</figure>

- Screw the top and middle levels together using 10 metal screws (2.9 x 9.5) starting from the center and then the corners.

<table>
  <tr>
    <td><img src="media/middle_level_02.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/middle_level_03.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/middle_level_04.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>

- Bundle the cables with cable ties (2.5mm) and attach them to the middle level

<figure> 
   <img src="media/middle_level_cable_01.jpg"  width="500" title="middle level cable">
</figure>

- Wind the cables together at the middle level, leaving 30 cm of each cable loose, and guide them back through the second opening (Note: Wi-Fi cables are shorter than the others!). It is recommended to keep the winding flat so that the cables can be easily guided back.
- Bundle the cables again and secure them with cable ties

<table>
  <tr>
    <td><img src="media/middle_level_cable_02.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/middle_level_cable_03.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/middle_level_05.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>

### Antenna mount (bottom level)
- Using a soldering iron and an M3 adapter tip at approximately 180°C, melt the threaded inserts into the corners of the bottom level.
- If necessary, first free the hole by screwing in an M3 cylinder head screw.

<figure> 
   <img src="media/bottom_level_press_nuts_01.jpg"  width="500" title="requirements for bottom level">
</figure>

- Place a threaded insert on the soldering iron with tweezers (**Attention: Hot!**).

<table>
  <tr>
    <td><img src="media/bottom_level_press_nuts_02.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/bottom_level_press_nuts_solder_iron_01.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/bottom_level_press_nuts_solder_iron_02.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>

- Melt in the threaded insert

<table>
  <tr>
    <td><img src="media/bottom_level_press_nuts_03.jpg" width="200" height="200" loading="lazy"></td>
    <td><img src="media/bottom_level_press_nuts_04.jpg" width="200" height="200" loading="lazy"></td>
    <td><img src="media/bottom_level_press_nuts_05.jpg" width="200" height="200" loading="lazy"></td>
    <td><img src="media/bottom_level_press_nuts_06.jpg" width="200" height="200" loading="lazy"></td>
  </tr>
</table>

- Repeat the melting process on all 4 corners.
- For later attachment to the deckbox lid, screw 4 cylinder head screws from the inside into the threads.

<figure> 
   <img src="media/bottom_level_fixation.jpg"  width="400" title="screws in nuts">
</figure>

- Guide the cables through the middle opening of the bottom level and place them on the middle level.
- Screw the bottom level into place using 10 metal screws, similar to the top level.
- Place the entire mount in the deckbox lid and secure it with screws in the corners.

<table>
  <tr>
    <td><img src="media/bottom_level_fixation_02.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/bottom_level_fixation_03.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/bottom_level_fixation_04.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>

---

## Deckbox bottom
### Drill holes for the power supply
- Using a step drill, create a 22 mm hole on two opposing sides (centered, 25 mm from the top edge).

<figure> 
   <img src="media/weipu_holes_drawing.jpg"  width="500" title="drawing for weipu sockets">
</figure>

- Control the drilled holes

<figure> 
   <img src="media/weipu_holes.jpg"  width="400" title="control holes weipu sockets">
</figure>


### Installing the Bottom Plate
- Insert the bottom plate into the deckbox, paying attention to the recess for the Weipu connectors.
- Secure the plate with 4 plastic washers and 4 metal screws (3.9 x 9.5).

<figure>
	<img src="media/bottom_part_plate.jpg" width="300" height="300" loading="lazy"></td>
</figure>


### AC/DC Converter
- Press the AC/DC converter into the housing.
<figure> 
   <img src="media/bottom_part_acdc_01.jpg"  width="400" title="ACDC converter with holder">
</figure>

- Screw the housing to the bottom plate with 2 metal screws (2.9 x 9.5mm) in the orientation as shown on the picture. 

<figure> 
   <img src="media/bottom_part_acdc_02.jpg"  width="400" title="ACDC converter on bottom plate">
</figure>

### PCB on AC/DC Housing
- Screw the PCB onto the AC/DC housing with 2 metal screws **(2.2 x 6.5 mm)**.\
**Attention: DO NOT confuse the screws with 9.5 mm length, otherwise the AC/DC-converter might take damage**

<figure> 
   <img src="media/bottom_part_pcb.jpg"  width="400" title="PCB on ACDC housing">
</figure>


### Connecting Weipu AC connector (3-Pole)
- Unscrew the nut and thread it onto the blue and brown cables of the AC/DC converter.
- Guide the cables outward through the hole.

<figure> 
   <img src="media/wire_weipu_nut.jpg"  width="400" title="install weipu sockets 01">
</figure>

- Shorten the AC cable to 10 cm from the deckbox and strip the insulation for about 6 mm.
- Remove the O-ring (seal) from the weipu socket, as it can not be used becaue the wall of the fibex case is to thick. The weipu socket will be glued in later.
- Put two shrink tubing on the wire, one on each core and solder the Weipu connector (3-pole) to the cable. The blue core has to be connected to pin 1 and the brown to pin 2 of the connector (it also works the other way around). Pin 3 (Ground) is not connected.
- Shrink the heat shrink tubing onto the pins, trying to have as little of the pin uncovered as possible.

<table>
  <tr>
    <td><img src="media/result_soldering_weipu.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/schrinking_tube_weipu.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>

### Connecting Weipu DC connector (2-Pole)
- Similar to AC-Connector, unscrew the nut and thread it onto the black and red cables. Guide the cables outward through the hole.
- Remove the O-ring (seal) from the weipu socket, as it can not be used becaue the wall of the fibex case is to thick. The weipu socket will be glued in later.
- Put two shrink tubing on the wire, one on each core and solder the Weipu connector to the cable. Black (ground) to pin 1 (at the top, marked whith a white dot) and red (lead) to pin 2 at the bottom of the connector.
- Shrink the heat shrink tubing onto the pins, trying to have as little of the pin uncovered as possible.
- Attach two electric wire ferrules on the other end of the wire.

<figure> 
   <img src="media/result_soldering_dc.jpg"  width="400" title="install weipu sockets 02">
</figure>

### Glueing / Sealing Weipu connectors with Sikaflex
- Both weipu sockets needs to be glued in the fibexas the deckbox wall is too thick. Use Sikaflex for this purpose.
- Clean the surfaces of the deckbox and Weipu connector in the contact area with alcohol.
- Apply Sikaflex (291i) to the flange of the Weipu connector with a spatula (as sparingly as possible, but there should be a continuous film on the connector).

<table>
  <tr>
    <td><img src="media/weipu_sockets_03.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/applied_sikaflex.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>

- Insert the connector (white dot pointing up) and screw it into place (27 mm wrench)
- Scrape off excess sealant with a q-tip

<figure> 
   <img src="media/first_weipu_installed.jpg"  width="400" title="install weipu sockets 02">
</figure>

- Repeat the procedure with the second weipu connector. The result should look like on the following picture.

<figure> 
   <img src="media/both_weipu_installed.jpg"  width="400" title="install weipu sockets 02">
</figure>

### Mounting the Raspberry Pi
- Cut the foam tape into 3 pieces (2x approximately 0.5 cm length for the sides of the recess in the bottom plate, 1x approximately 3 cm length for the clamp) and glue them into place.

<table>
  <tr>
    <td><img src="media/bottom_part_rpi_01.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/bottom_part_rpi_02.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>

- Insert the Raspberry Pi, secure the clamp, and screw it into place with a metal screw (2.9 x 9.5 mm) with an applied washer.

<table>
  <tr>
    <td><img src="media/bottom_part_rpi_03.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/bottom_part_rpi_04.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>


### Manufacturing the USB-C Plug
- To safe some space it is recommeneded to manufacture a usb plug from slim spare parts. We use the repair kit of recable shown below.

<figure> 
   <img src="media/prepare_usbc_plug.jpg"  width="400" title="connect acdc PCB">
</figure>

- First you have to cut a small triangle in on site top of the shrinking tube.

<figure> 
   <img src="media/cut_edge_shrinking_tube.jpg"  width="400" title="connect acdc PCB">
</figure>

- Remove about 2 mm of the insulation from the dc/dc converter output wires.
- Soldering the wires to the plug as shown in the picture.
- If you use the recable plug the bigger pin (on the left) is the V+ contact and the biggest pin (on the right) is the V- contact. In this case the yellow wire is the lead.

<figure> 
   <img src="media/result_soldering_usbc.jpg"  width="400" title="connect acdc PCB">
</figure>

- Now you can slide the frame of the plug over the plug until it is snap into its place.
- Bend the wire holder downwards at a right angle and guide the wires into its holder.
- Fix the wires with a pliers.

<table>
  <tr>
    <td><img src="media/insert_housing_usbc.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/fix_cable_usbc.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>

- Move the schrink tube over the plug. The cutted edge has to be at the bottom and at the front.
- Try to hold it in position with on hand during shrinking the tube with a heat gun. Also the right angle should be bent back in final position during heating.\
**Attention: Be carfull because of the hot air during this process to avoid burnings.**
  
<table>
  <tr>
    <td><img src="media/schrink_tube_usbc.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/result_usbc.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>


### Installing the DC/DC Converter
- Install the DC/DC converter with the holder and screw it into place (use a screw 2.9 x 9.5 mm)

<figure> 
   <img src="media/bottom_part_dcdc_01.jpg"  width="400" title="connect dcdc PCB">
</figure>


### Prepare power cable for router
- If you are not reusing the power cable from the RUT955 you need to make your own cable.
- You need a molex plug with two crimp contacts (2824-20) two electric wire ferrules and about 25 cm of 2 core wire
<figure> 
   <img src="media/prepare_molex.jpg"  width="400">
</figure>

- Take the cable and strip down the insulation by ~6 mm at the one site and ~3mm at the other side.
- Crimp down electric wire ferrules on each of the end with 6mm.

<figure> 
   <img src="media/applied_ferrules.jpg"  width="400">
</figure>

- Crimp the molex 2824-connectors on the other end.
- Insert molex connectors into the top part of 4x4 molex plug (the pin position is also descriped on the top of the router).

<table>
  <tr>
    <td><img src="media/crimp_molex_pin.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/result_crimp_molex.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/insert_pin_molex.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>


### Connecting the Router Antennas
- Screw the antennas onto the router

<figure> 
   <img src="media/bottom_part_router_antennas_01.jpg"  width="400">
</figure>

- Screw the router onto the bottom plate (using 4 screws 2.9 x 9.5 mm)

<table>
  <tr>
    <td><img src="media/bottom_part_router_plate_01.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/bottom_part_router_plate_02.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>

- Insert the Ethernet and power (12V) cables

<figure> 
   <img src="media/bottom_part_router_plate_03.jpg"  width="400">
</figure>


### Connecting power wires to PCB board
- Shorten the DC cable from the AC/DC converter to 20 cm and strip the insulation.
- Screw the cable into place on the input side (In1) of the PCB.
- Repeat the procedure for the wire of the DC-input of the weipu socket and screw it into the other input (In2) on the PCB

<figure> 
   <img src="media/bottom_part_acdc_pcb.jpg"  width="400" title="connect acdc PCB">
</figure>

- Attach two electric wire ferrules to the input wires of the dc/dc converter.
- Screw it to the output of the PCB (Out1).
- Screw the power cable of the router on the other output (Out2).
- Insert the USB-C connector into the Raspberry Pi


### Result deckbox bottom
- Up until now the deckbox lower part should look something like this.

<figure> 
   <img src="media/bottom_part_complete.jpg"  width="400">
</figure>

----


## Finishing deckbox and attaching the deckbox cage
- You need the mounting plate/cage and the 4 M4 screws (inkl nut and washer)

<figure> 
   <img src="media/cage_00.jpg"  width="400">
</figure>

- Screw the stainless steel cage onto the deckbox bottom (M4)

<table>
  <tr>
    <td><img src="media/cage_01.jpg" width="300" height="300" loading="lazy"></td>
    <td><img src="media/cage_02.jpg" width="300" height="300" loading="lazy"></td>
  </tr>
</table>

- Clean the seal of the deckbox
- Place the lid on top and screw it into place

<figure> 
   <img src="media/cage_04.jpg"  width="400">
</figure>

- Attach the connector caps

<figure> 
   <img src="media/cage_05.jpg"  width="400">
</figure>

- (optional) Apply stickers

---
## Manufacture power cable
Depending on the power source available on the chosen vessel, you can manufacture the corresponding power cable. 

### Power cable for 230 V AC
**Safety caution: When dealing with 230 V make sure that you do not endanger yourself and that your product is safe for usage by other people. Make sure that you have the necessary training and follow the local laws.**

- Cut 15 m cable (or length suitable for your application)
- Attach Schuko plug including cap on one side
- Attach Weipu 3 pin plug on the other side (use pin 1 and 2)

### Power cable for 9-30 V DC
- Cut 15 m cable (or length suitable for your application)
- Use brown wire as plus. Use blue wire as minus
- Attach Weipu 2 pin plug including cap to one side. Use pin 1 as minus, pin 2 as plus
- Attach plug of your choice to second end of cable
